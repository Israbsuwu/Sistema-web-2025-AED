{% extends "vlastef_app/layout.html" %}
{% load static %}

{% block title %}Iniciar sesión{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'vlastef_app/css/login.css' %}">
{% endblock %}

{% block body %}
  <div class="card">
    <section class="hero">
      <div class="hero-content">
        <h2 class="bienvenida">¡Bienvenid@ a</h2>
        <h1 class="marca">Moda VLASTEF!</h1>
        <p class="subtexto">Todo lo que deseas en un solo lugar.</p>
        <div class="logo-grande">
          <img src="{% static 'vlastef_app/images/logo.png' %}" alt="Logo" />
        </div>
      </div>
    </section>

    <section class="panel">
      <form method="post" id="loginForm" novalidate>
        {% csrf_token %}
        <label class="muted">Usuario</label>
        <input id="username" name="username" class="input" type="text" placeholder="Usuario" value="{{ request.POST.username|default_if_none:'' }}" />

        <label class="muted">Contraseña</label>
        <div class="field-with-icon">
          <input id="password" name="password" class="input" type="password" placeholder="••••••••" />
          <button type="button" class="toggle-pass" aria-label="Mostrar contraseña" title="Mostrar contraseña" onclick="var p=document.getElementById('password');var s=this.querySelector('.slash');if(p.type==='password'){p.type='text';s.style.display='block';}else{p.type='password';s.style.display='none';}this.classList.toggle('show');">
            <span style="position:relative;display:inline-block;width:20px;height:20px;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" style="position:absolute;top:0;left:0;">
                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
              <svg class="slash" width="20" height="20" viewBox="0 0 24 24" style="position:absolute;top:0;left:0;display:none;pointer-events:none;" fill="none" stroke="#000000" stroke-width="2.2" stroke-linecap="round"><line x1="4" y1="20" x2="20" y2="4"/></svg>
            </span>
          </button>
        </div>

        {% if error %}
          <div id="loginErrors" style="color:#b00020;font-size:13px;margin-top:8px;display:block">{{ error }}</div>
        {% else %}
          <div id="loginErrors" style="color:#b00020;font-size:13px;margin-top:8px;display:none"></div>
        {% endif %}

        {% if messages %}
          {% for message in messages %}
            <div style="margin-top:8px;color:green">{{ message }}</div>
          {% endfor %}
        {% endif %}

        <div class="row" style="justify-content:space-between;margin-top:6px;margin-bottom:14px">
          <label style="display:flex;align-items:center;gap:8px"><input type="checkbox" name="remember"/>Recuérdame</label>
          <a class="muted" href="#">¿Olvidaste tu contraseña?</a>
        </div>

        <div class="actions">
          <button id="btnLogin" class="btn" type="submit">Ingresar</button>
          <a class="btn secondary" href="{% url 'register' %}">Registrarse</a>
        </div>
      </form>
    </section>
  </div>
{% endblock %}
