{% extends 'vlastef_app/admin_panel/base.html' %}
{% load static %}

{% block title %}{{ titulo }} | Panel de Administración{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'vlastef_app/css/admin_panel/stock.css' %}">
{% endblock %}

{% block main_content %}
    <div class="stock-form-panel">
        <div class="form-header">
            <h1 class="form-title">{{ titulo }}</h1>
            <a href="{% url 'admin_stock' %}" class="btn-volver">Cancelar</a>
        </div>

        <div class="form-card">
            <form method="post" class="stock-form" novalidate>
                {% csrf_token %}

                {% if form.non_field_errors %}
                    <div class="alert error">{{ form.non_field_errors }}</div>
                {% endif %}


                <div class="form-group">
                    <label for="{{ form.producto.id_for_label }}">Producto *</label>
                    {{ form.producto }}
                </div>

                <div class="form-row">
                    <div class="form-group half">
                        <label for="{{ form.tipo.id_for_label }}">Tipo de Movimiento *</label>
                        {{ form.tipo }}
                    </div>

                    <div class="form-group half">
                        <label for="{{ form.cantidad.id_for_label }}">Cantidad *</label>
                        {{ form.cantidad }}
                    </div>
                </div>

                <div class="form-group">
                    <label for="{{ form.descripcion.id_for_label }}">Descripción / Motivo</label>
                    {{ form.descripcion }}
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-guardar">Registrar Movimiento</button>
                </div>
            </form>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <div id="stock-alerts-source" style="display:none;">
        {% if messages %}
            {% for message in messages %}
                <div class="alert-item" data-type="{{ message.tags|default:'error' }}">{{ message|escape }}</div>
            {% endfor %}
        {% endif %}
        {% if form.errors %}
            {% for field in form %}
                {% for error in field.errors %}
                    <div class="alert-item" data-type="error">Error en {{ field.label }}: {{ error|escape }}</div>
                {% endfor %}
            {% endfor %}
            {% for error in form.non_field_errors %}
                <div class="alert-item" data-type="error">{{ error|escape }}</div>
            {% endfor %}
        {% endif %}
    </div>
    <script src="{% static 'vlastef_app/js/admin_panel/stock_form.js' %}"></script>
{% endblock %}
