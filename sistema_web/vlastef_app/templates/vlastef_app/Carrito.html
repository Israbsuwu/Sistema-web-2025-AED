<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Carrito - Moda Vlastef</title>
  <link rel="icon" type="image/svg+xml" href="../assets/favicon.svg">
  <link rel="stylesheet" href="../assets/styles.css">
  <link rel="stylesheet" href="../assets/cart.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="../assets/scripts.js"></script>
  <script src="../assets/cart.js" defer></script>
  <style>
    /* ESTILOS RESPONSIVE BASE */
    * {
      box-sizing: border-box;
    }
    
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      min-height: 100vh;
      background-color: #f8f9fa;
    }
    
    .topbar {
      background: transparent;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      flex-wrap: wrap;
    }
    
    .logo {
      color: var(--brand, #667eea);
      font-weight: 700;
      text-decoration: none;
      white-space: nowrap;
    }
    
    .cart-wrap {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      width: 100%;
    }
    
    .cart-card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      overflow: hidden;
      margin-top: 20px;
    }
    
    .cart-header {
      padding: 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    
    .cart-header h2 {
      margin: 0;
      font-size: 24px;
      color: #333;
    }
    
    .btn {
      padding: 8px 16px;
      border-radius: 6px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 14px;
    }
    
    .btn.ghost {
      background: transparent;
      color: #666;
      border: 1px solid #ddd;
    }
    
    .btn.ghost:hover {
      background: #f5f5f5;
      border-color: #ccc;
    }
    
    .btn.primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
    }
    
    .btn.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    
    .cart-body {
      display: flex;
      flex-wrap: wrap;
      padding: 0;
    }
    
    .cart-items {
      flex: 1;
      min-width: 300px;
      padding: 20px;
      border-right: 1px solid #eee;
    }
    
    .cart-summary {
      width: 320px;
      padding: 20px;
      background: #f9f9f9;
    }
    
    /* CART ITEM STYLES */
    .cart-item {
      display: flex;
      gap: 15px;
      padding: 15px;
      border-bottom: 1px solid #eee;
      align-items: flex-start;
      flex-wrap: wrap;
    }
    
    .cart-item img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 6px;
    }
    
    .item-details {
      flex: 1;
      min-width: 150px;
    }
    
    .item-details h4 {
      margin: 0 0 5px 0;
      color: #333;
      font-size: 16px;
    }
    
    .item-controls {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .quantity-control {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .qty-btn {
      width: 30px;
      height: 30px;
      border: 1px solid #ddd;
      background: white;
      border-radius: 4px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .qty-input {
      width: 50px;
      padding: 6px;
      text-align: center;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .item-price {
      font-weight: 600;
      color: #333;
      font-size: 18px;
      min-width: 80px;
      text-align: right;
    }
    
    .delete-btn {
      background: none;
      border: none;
      color: #ff4444;
      cursor: pointer;
      font-size: 16px;
      padding: 8px;
      border-radius: 4px;
    }
    
    .delete-btn:hover {
      background: #fff5f5;
    }
    
    .controls-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .actions-row {
      display: flex;
      gap: 10px;
    }
    
    .empty {
      text-align: center;
      padding: 40px 20px;
      color: #666;
    }
    
    .empty h3 {
      margin: 15px 0 10px;
      color: #333;
    }
    
    .summary-row {
      display: flex;
      justify-content: space-between;
      padding: 10px 0;
      border-bottom: 1px solid #eee;
    }
    
    .summary-row.total {
      font-size: 20px;
      font-weight: 700;
      color: #333;
      border-bottom: none;
      margin-top: 10px;
      padding-top: 15px;
      border-top: 2px solid #ddd;
    }
    
    .success-message {
      display: none;
      position: fixed;
      top: 20px;
      right: 20px;
      background: #4CAF50;
      color: white;
      padding: 15px 25px;
      border-radius: 8px;
      z-index: 9999;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      max-width: 400px;
      animation: slideIn 0.3s ease;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(100px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }
    
    .site-footer {
      text-align: center;
      padding: 20px;
      color: #666;
      border-top: 1px solid #eee;
      margin-top: 40px;
      display: flex;
      justify-content: center;
      gap: 30px;
      flex-wrap: wrap;
    }
    
    /* =========== MODAL DE SELECCIÓN DE PAGO =========== */
    .payment-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1000;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .payment-modal {
      background: white;
      width: 90%;
      max-width: 500px;
      border-radius: 12px;
      overflow: hidden;
      animation: slideIn 0.3s ease;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .payment-header {
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .payment-header h3 {
      margin: 0;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .close-payment {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
    }
    
    .close-payment:hover {
      transform: scale(1.2);
    }
    
    .payment-body {
      padding: 25px;
    }
    
    .payment-methods {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 25px;
    }
    
    .payment-option {
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      display: flex;
      align-items: center;
      gap: 15px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .payment-option:hover {
      border-color: #667eea;
      background: #f8f9ff;
    }
    
    .payment-option.selected {
      border-color: #667eea;
      background: #f0f4ff;
    }
    
    .payment-icon {
      width: 50px;
      height: 50px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      color: white;
      flex-shrink: 0;
    }
    
    .card-icon { background: linear-gradient(135deg, #667eea, #764ba2); }
    .paypal-icon { background: #003087; }
    .cash-icon { background: linear-gradient(135deg, #4CAF50, #2E7D32); }
    
    .payment-option label {
      flex: 1;
      cursor: pointer;
      font-weight: 500;
    }
    
    .payment-option input[type="radio"] {
      cursor: pointer;
      width: 20px;
      height: 20px;
    }
    
    .payment-actions {
      display: flex;
      gap: 10px;
      margin-top: 25px;
    }
    
    .btn-continue {
      flex: 1;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s;
    }
    
    .btn-continue:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }
    
    .btn-back {
      padding: 15px 20px;
      background: #f5f5f5;
      color: #333;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .btn-back:hover {
      background: #e0e0e0;
    }
    
    /* =========== MODAL DE FORMULARIO DE TARJETA =========== */
    .card-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 1001;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }
    
    .card-modal {
      background: white;
      width: 90%;
      max-width: 500px;
      border-radius: 12px;
      overflow: hidden;
      animation: slideIn 0.3s ease;
      max-height: 90vh;
      overflow-y: auto;
    }
    
    .card-header {
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .card-header h3 {
      margin: 0;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .close-card {
      background: none;
      border: none;
      color: white;
      font-size: 24px;
      cursor: pointer;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .card-body {
      padding: 25px;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
      font-size: 14px;
    }
    
    .form-input {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 16px;
      box-sizing: border-box;
      transition: border 0.3s;
    }
    
    .form-input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .form-input.error {
      border-color: #ff4444;
      background-color: #fff8f8;
    }
    
    .form-row {
      display: flex;
      gap: 15px;
    }
    
    .form-row .form-group {
      flex: 1;
    }
    
    .error-message {
      color: #ff4444;
      font-size: 12px;
      margin-top: 5px;
      min-height: 18px;
    }
    
    .card-icons {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }
    
    .card-brand {
      width: 40px;
      height: 25px;
      border-radius: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: bold;
      color: white;
      opacity: 0.3;
      transition: opacity 0.3s;
    }
    
    .card-brand.active {
      opacity: 1;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    .visa { background: linear-gradient(135deg, #1a1f71, #f7b600); }
    .mastercard { background: linear-gradient(135deg, #eb001b, #f79e1b); }
    .amex { background: linear-gradient(135deg, #2e77bb, #6ec9e0); }
    
    .submit-payment {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: all 0.3s;
      margin-top: 20px;
    }
    
    .submit-payment:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }
    
    .submit-payment:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .payment-footer {
      margin-top: 20px;
      text-align: center;
      font-size: 12px;
      color: #666;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 6px;
    }
    
    .loading-spinner {
      display: none;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* =========================== */
    /* MEDIA QUERIES RESPONSIVE   */
    /* =========================== */
    
    /* Tablets y pantallas medianas */
    @media (max-width: 1024px) {
      .cart-body {
        flex-direction: column;
      }
      
      .cart-items {
        border-right: none;
        border-bottom: 1px solid #eee;
      }
      
      .cart-summary {
        width: 100%;
      }
      
      .item-controls {
        margin-left: 0;
        margin-top: 10px;
        width: 100%;
        justify-content: space-between;
      }
      
      .item-price {
        text-align: left;
      }
    }
    
    /* Móviles grandes y tablets pequeñas */
    @media (max-width: 768px) {
      .cart-wrap {
        padding: 10px;
      }
      
      .cart-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .cart-header h2 {
        font-size: 20px;
      }
      
      .controls-top {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
      }
      
      .actions-row {
        width: 100%;
        justify-content: space-between;
      }
      
      .cart-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
      
      .cart-item img {
        width: 100%;
        height: auto;
        max-width: 200px;
      }
      
      .item-details {
        width: 100%;
      }
      
      .item-controls {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        width: 100%;
      }
      
      .payment-modal, .card-modal {
        width: 95%;
        margin: 10px;
      }
      
      .payment-actions {
        flex-direction: column;
      }
      
      .btn-back {
        order: 2;
        margin-top: 10px;
      }
      
      .btn-continue {
        order: 1;
      }
      
      .form-row {
        flex-direction: column;
        gap: 10px;
      }
      
      .topbar {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
    }
    
    /* Móviles pequeños */
    @media (max-width: 480px) {
      .payment-modal, .card-modal {
        width: 95%;
        margin: 5px;
        padding: 0;
      }
      
      .payment-header, .card-header {
        padding: 15px;
      }
      
      .payment-body, .card-body {
        padding: 20px;
      }
      
      .payment-header h3, .card-header h3 {
        font-size: 18px;
      }
      
      .payment-option {
        padding: 12px;
        gap: 10px;
      }
      
      .payment-icon {
        width: 40px;
        height: 40px;
        font-size: 18px;
      }
      
      .cart-items, .cart-summary {
        padding: 15px;
      }
      
      .btn {
        padding: 10px 15px;
        font-size: 13px;
      }
      
      .success-message {
        left: 10px;
        right: 10px;
        max-width: none;
        text-align: center;
      }
    }
    
    /* Pantallas muy pequeñas */
    @media (max-width: 360px) {
      .cart-wrap {
        padding: 5px;
      }
      
      .cart-header {
        padding: 15px;
      }
      
      .btn {
        width: 100%;
        margin-bottom: 5px;
      }
      
      .actions-row {
        flex-direction: column;
      }
      
      .payment-option label strong {
        font-size: 14px;
      }
      
      .payment-option label div {
        font-size: 12px;
      }
    }
    
    /* Pantallas grandes */
    @media (min-width: 1400px) {
      .cart-wrap {
        max-width: 1400px;
      }
    }
  </style>
</head>
<body>
  <header class="topbar">
    <a href="Menu_Principal.html" class="logo">← Volver al catálogo</a>
    <div style="display: flex; align-items: center; gap: 20px;">
      <span id="cart-counter" style="background: var(--brand, #667eea); color: white; padding: 4px 10px; border-radius: 12px; font-size: 14px;">0</span>
    </div>
  </header>

  <main class="cart-wrap">
    <div id="successMessage" class="success-message"></div>
    
    <div class="cart-card">
      <div class="cart-header">
        <h2>Tu carrito</h2>
        <div>
          <button id="clearCart" class="btn ghost">Vaciar carrito</button>
        </div>
      </div>

      <div class="cart-body">
        <section class="cart-items" aria-label="Lista de productos">
          <div class="controls-top">
            <div><label><input type="checkbox" id="selectAll"> Seleccionar todo</label></div>
            <div class="actions-row">
              <button id="deleteSelected" class="btn ghost">Eliminar seleccionados</button>
              <button id="applyDiscount" class="btn ghost">Aplicar Cupón</button>
            </div>
          </div>

          <div id="cartItems"></div>
          <div id="cartEmpty" class="empty" style="display:none">
            <i class="fas fa-shopping-cart" style="font-size: 48px; color: #ccc; margin-bottom: 15px;"></i>
            <h3>Tu carrito está vacío</h3>
            <p>Ve al <a href="Menu_Principal.html">catálogo</a> y añade productos.</p>
          </div>
        </section>

        <aside id="cartSummary" class="cart-summary" aria-label="Resumen del pedido">
          <h3>Resumen</h3>
          <div class="summary-row">
            <span>Productos (<span id="itemCount">0</span>)</span>
            <span id="subtotal">C$ 0.00</span>
          </div>
          <div class="summary-row"><span>Envío</span><span id="shipping">C$ 5.00</span></div>
          <div class="summary-row"><span>IVA (12%)</span><span id="iva">C$ 0.00</span></div>
          <div class="summary-row"><span>Descuento</span><span id="discount">-C$ 0.00</span></div>
          <div class="summary-row total"><span>Total</span><span id="total">C$ 0.00</span></div>
          
          <div style="margin-top: 12px; margin-bottom: 15px;">
            <input type="text" id="couponCode" placeholder="Código de cupón" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
          </div>
          
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button id="checkoutBtn" class="btn primary" style="flex:1">
              <i class="fas fa-lock"></i> Proceder al Pago
            </button>
            <a href="Menu_Principal.html" class="btn ghost" style="align-self:center;padding:10px 12px">
              <i class="fas fa-arrow-left"></i> Seguir comprando
            </a>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <!-- ========== MODAL 1: SELECCIÓN DE MÉTODO DE PAGO ========== -->
  <div id="paymentOverlay" class="payment-overlay">
    <div class="payment-modal">
      <div class="payment-header">
        <h3><i class="fas fa-credit-card"></i> Selecciona método de pago</h3>
        <button class="close-payment" id="closePayment">&times;</button>
      </div>
      
      <div class="payment-body">
        <div class="payment-methods">
          <div class="payment-option" id="optionCard">
            <div class="payment-icon card-icon">
              <i class="fas fa-credit-card"></i>
            </div>
            <label for="methodCard">
              <strong>Tarjeta de crédito/débito</strong>
              <div style="font-size: 14px; color: #666; margin-top: 4px;">
                Paga con Visa, Mastercard, American Express
              </div>
            </label>
            <input type="radio" name="paymentMethod" id="methodCard" value="card">
          </div>
          
          <div class="payment-option" id="optionPayPal">
            <div class="payment-icon paypal-icon">
              <i class="fab fa-paypal"></i>
            </div>
            <label for="methodPayPal">
              <strong>PayPal</strong>
              <div style="font-size: 14px; color: #666; margin-top: 4px;">
                Paga rápido y seguro con PayPal
              </div>
            </label>
            <input type="radio" name="paymentMethod" id="methodPayPal" value="paypal">
          </div>
          
          <div class="payment-option" id="optionCash">
            <div class="payment-icon cash-icon">
              <i class="fas fa-money-bill-wave"></i>
            </div>
            <label for="methodCash">
              <strong>Pago contra entrega</strong>
              <div style="font-size: 14px; color: #666; margin-top: 4px;">
                Paga en efectivo cuando recibas tu pedido
              </div>
            </label>
            <input type="radio" name="paymentMethod" id="methodCash" value="cash">
          </div>
        </div>
        
        <div class="payment-actions">
          <button id="continuePayment" class="btn-continue">
            <i class="fas fa-arrow-right"></i>
            <span id="continueText">Continuar</span>
          </button>
          <button id="backToCart" class="btn-back">
            <i class="fas fa-arrow-left"></i> Volver
          </button>
        </div>
        
        <div class="payment-footer">
          <i class="fas fa-shield-alt"></i> Pagos 100% seguros
        </div>
      </div>
    </div>
  </div>

  <!-- ========== MODAL 2: FORMULARIO DE TARJETA ========== -->
  <div id="cardOverlay" class="card-overlay">
    <div class="card-modal">
      <div class="card-header">
        <h3><i class="fas fa-credit-card"></i> Ingresa los datos de tu tarjeta</h3>
        <button class="close-card" id="closeCard">&times;</button>
      </div>
      
      <div class="card-body">
        <div class="form-group">
          <label for="cardNumber">Número de tarjeta</label>
          <input type="text" id="cardNumber" class="form-input" 
                 placeholder="1234 5678 9012 3456" maxlength="19"
                 autocomplete="cc-number">
          <div class="error-message" id="cardNumberError"></div>
          <div class="card-icons">
            <div class="card-brand visa" id="visaIcon">VISA</div>
            <div class="card-brand mastercard" id="mastercardIcon">MC</div>
            <div class="card-brand amex" id="amexIcon">AMEX</div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="cardName">Nombre en la tarjeta</label>
          <input type="text" id="cardName" class="form-input" 
                 placeholder="JUAN PEREZ" autocomplete="cc-name">
          <div class="error-message" id="cardNameError"></div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label for="cardExpiry">Fecha de expiración (MM/AA)</label>
            <input type="text" id="cardExpiry" class="form-input" 
                   placeholder="MM/AA" maxlength="5" autocomplete="cc-exp">
            <div class="error-message" id="cardExpiryError"></div>
          </div>
          
          <div class="form-group">
            <label for="cardCVC">Código de seguridad (CVC)</label>
            <input type="password" id="cardCVC" class="form-input" 
                   placeholder="123" maxlength="4" autocomplete="cc-csc">
            <div class="error-message" id="cardCVCError"></div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="cardEmail">Correo para el recibo</label>
          <input type="email" id="cardEmail" class="form-input" 
                 placeholder="tu@email.com" autocomplete="email">
          <div class="error-message" id="cardEmailError"></div>
        </div>
        
        <div class="form-group">
          <label>
            <input type="checkbox" id="saveCard" checked>
            Guardar tarjeta para futuras compras (opcional)
          </label>
        </div>
        
        <button id="submitPayment" class="submit-payment">
          <i class="fas fa-lock"></i>
          <span id="paymentButtonText">Pagar C$ 0.00</span>
          <div class="loading-spinner" id="paymentSpinner"></div>
        </button>
        
        <div class="payment-footer">
          <i class="fas fa-shield-alt"></i> Tus datos están encriptados y protegidos
        </div>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <div>© 2025 Moda Vlastef</div>
    <div><a href="#">Soporte</a></div>
  </footer>

  <script>
    // ============================
    // SISTEMA DE CARRITO
    // ============================
    
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let selectedItems = new Set();
    const DISCOUNT_COUPON = { code: "VLAS10", discount: 10 };
    let selectedPaymentMethod = null;
    let paymentAmount = 0;
    
    document.addEventListener('DOMContentLoaded', function() {
      loadCart();
      updateCartCounter();
      setupEventListeners();
      setupPaymentSystem();
    });
    
    function loadCart() {
      const cartItemsContainer = document.getElementById('cartItems');
      const cartEmpty = document.getElementById('cartEmpty');
      
      if (cart.length === 0) {
        cartEmpty.style.display = 'block';
        cartItemsContainer.innerHTML = '';
        updateSummary();
        return;
      }
      
      cartEmpty.style.display = 'none';
      cartItemsContainer.innerHTML = '';
      
      cart.forEach((item, index) => {
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.dataset.index = index;
        
        if (selectedItems.has(index)) {
          cartItem.classList.add('selected');
        }
        
        cartItem.innerHTML = `
          <div>
            <input type="checkbox" class="item-checkbox" data-index="${index}" ${selectedItems.has(index) ? 'checked' : ''}>
          </div>
          <img src="${item.image || 'https://via.placeholder.com/80'}" alt="${item.name}">
          <div class="item-details">
            <h4>${item.name}</h4>
            <p style="color: #666; font-size: 14px;">${item.description || 'Producto de moda'}</p>
            <p style="color: #888; font-size: 12px;">Talla: ${item.size || 'M'}, Color: ${item.color || 'Negro'}</p>
          </div>
          <div class="item-controls">
            <div class="quantity-control">
              <button class="qty-btn minus" data-index="${index}">-</button>
              <input type="number" class="qty-input" value="${item.quantity}" min="1" max="99" data-index="${index}">
              <button class="qty-btn plus" data-index="${index}">+</button>
            </div>
          </div>
          <div class="item-price">
            C$ ${(item.price * item.quantity).toFixed(2)}
          </div>
          <button class="delete-btn" data-index="${index}" title="Eliminar producto">
            <i class="fas fa-trash"></i>
          </button>
        `;
        
        cartItemsContainer.appendChild(cartItem);
      });
      
      updateSummary();
    }
    
    function updateSummary() {
      // Calcular la suma de todos los productos correctamente
      const subtotal = cart.reduce((sum, item) => {
        const price = parseFloat(item.price) || 0;
        const quantity = parseInt(item.quantity) || 1;
        return sum + (price * quantity);
      }, 0);
      
      const shipping = 5.00;
      const iva = subtotal * 0.12;
      let discount = 0;
      
      const appliedCoupon = localStorage.getItem('appliedCoupon');
      if (appliedCoupon === DISCOUNT_COUPON.code) {
        discount = subtotal * (DISCOUNT_COUPON.discount / 100);
      }
      
      const total = subtotal + shipping + iva - discount;
      paymentAmount = total;
      
      // Actualizar los montos en pantalla - EN CÓRDOBAS
      document.getElementById('subtotal').textContent = `C$ ${subtotal.toFixed(2)}`;
      document.getElementById('shipping').textContent = `C$ ${shipping.toFixed(2)}`;
      document.getElementById('iva').textContent = `C$ ${iva.toFixed(2)}`;
      document.getElementById('discount').textContent = `-C$ ${discount.toFixed(2)}`;
      document.getElementById('total').textContent = `C$ ${total.toFixed(2)}`;
      
      // Actualizar el total en el botón de pago también
      document.getElementById('paymentButtonText').textContent = `Pagar C$ ${total.toFixed(2)}`;
      
      // Calcular la cantidad total de productos
      const itemCount = cart.reduce((sum, item) => sum + (parseInt(item.quantity) || 1), 0);
      document.getElementById('itemCount').textContent = itemCount;
      
      updateCartCounter();
    }
    
    function updateCartCounter() {
      const totalItems = cart.reduce((sum, item) => sum + (parseInt(item.quantity) || 1), 0);
      document.getElementById('cart-counter').textContent = totalItems;
      localStorage.setItem('cart', JSON.stringify(cart));
    }
    
    // ============================
    // SISTEMA DE PAGOS DE 2 PASOS
    // ============================
    
    function setupPaymentSystem() {
      const paymentOverlay = document.getElementById('paymentOverlay');
      const cardOverlay = document.getElementById('cardOverlay');
      const checkoutBtn = document.getElementById('checkoutBtn');
      const closePayment = document.getElementById('closePayment');
      const closeCard = document.getElementById('closeCard');
      const backToCart = document.getElementById('backToCart');
      const continuePayment = document.getElementById('continuePayment');
      const submitPayment = document.getElementById('submitPayment');
      const paymentMethods = document.querySelectorAll('input[name="paymentMethod"]');
      const continueText = document.getElementById('continueText');
      const paymentButtonText = document.getElementById('paymentButtonText');
      
      // Elementos del formulario de tarjeta
      const cardNumberInput = document.getElementById('cardNumber');
      const cardNameInput = document.getElementById('cardName');
      const cardExpiryInput = document.getElementById('cardExpiry');
      const cardCVCInput = document.getElementById('cardCVC');
      const cardEmailInput = document.getElementById('cardEmail');
      
      // PASO 1: Mostrar selección de métodos de pago
      checkoutBtn.addEventListener('click', function() {
        if (cart.length === 0) {
          showMessage('Tu carrito está vacío', 'warning');
          return;
        }
        
        // Resetear selección
        document.querySelectorAll('.payment-option').forEach(option => {
          option.classList.remove('selected');
        });
        document.querySelectorAll('input[name="paymentMethod"]').forEach(input => {
          input.checked = false;
        });
        selectedPaymentMethod = null;
        continueText.textContent = 'Continuar';
        
        paymentOverlay.style.display = 'flex';
        document.body.style.overflow = 'hidden';
      });
      
      // Seleccionar método de pago
      paymentMethods.forEach(method => {
        method.addEventListener('change', function() {
          // Actualizar selección visual
          document.querySelectorAll('.payment-option').forEach(option => {
            option.classList.remove('selected');
          });
          
          const selectedOption = document.getElementById(`option${this.value.charAt(0).toUpperCase() + this.value.slice(1)}`);
          if (selectedOption) {
            selectedOption.classList.add('selected');
          }
          
          selectedPaymentMethod = this.value;
          
          // Actualizar texto del botón
          if (this.value === 'card') {
            continueText.textContent = 'Continuar con tarjeta';
          } else if (this.value === 'paypal') {
            continueText.textContent = 'Continuar con PayPal';
          } else if (this.value === 'cash') {
            continueText.textContent = 'Confirmar pedido';
          }
        });
      });
      
      // Continuar al siguiente paso
      continuePayment.addEventListener('click', function() {
        if (!selectedPaymentMethod) {
          showMessage('Por favor selecciona un método de pago', 'warning');
          return;
        }
        
        // Actualizar monto en el botón de pago con el total actualizado
        paymentButtonText.textContent = `Pagar C$ ${paymentAmount.toFixed(2)}`;
        
        if (selectedPaymentMethod === 'card') {
          // PASO 2: Mostrar formulario de tarjeta
          paymentOverlay.style.display = 'none';
          cardOverlay.style.display = 'flex';
          resetCardForm();
          
        } else if (selectedPaymentMethod === 'paypal') {
          // Procesar PayPal directamente
          paymentOverlay.style.display = 'none';
          document.body.style.overflow = 'auto';
          processPayPalPayment();
          
        } else if (selectedPaymentMethod === 'cash') {
          // Procesar pago contra entrega
          paymentOverlay.style.display = 'none';
          document.body.style.overflow = 'auto';
          processCashPayment();
        }
      });
      
      // Volver al carrito desde modal 1
      backToCart.addEventListener('click', function() {
        paymentOverlay.style.display = 'none';
        document.body.style.overflow = 'auto';
      });
      
      // Cerrar modales
      closePayment.addEventListener('click', function() {
        paymentOverlay.style.display = 'none';
        document.body.style.overflow = 'auto';
      });
      
      closeCard.addEventListener('click', function() {
        cardOverlay.style.display = 'none';
        document.body.style.overflow = 'auto';
      });
      
      // Cerrar al hacer clic fuera
      paymentOverlay.addEventListener('click', function(e) {
        if (e.target === paymentOverlay) {
          paymentOverlay.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      });
      
      cardOverlay.addEventListener('click', function(e) {
        if (e.target === cardOverlay) {
          cardOverlay.style.display = 'none';
          document.body.style.overflow = 'auto';
        }
      });
      
      // Volver a selección de método desde formulario de tarjeta
      document.getElementById('cardOverlay').addEventListener('click', function(e) {
        if (e.target.classList.contains('back-to-methods')) {
          cardOverlay.style.display = 'none';
          paymentOverlay.style.display = 'flex';
        }
      });
      
      // ============================
      // VALIDACIONES DE TARJETA
      // ============================
      
      cardNumberInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\s/g, '').replace(/\D/g, '');
        let formatted = '';
        
        for (let i = 0; i < value.length; i++) {
          if (i > 0 && i % 4 === 0) {
            formatted += ' ';
          }
          formatted += value[i];
        }
        
        e.target.value = formatted.substring(0, 19);
        detectCardType(value);
        validateCardNumber(value);
      });
      
      cardNameInput.addEventListener('input', function(e) {
        validateCardName(e.target.value);
      });
      
      cardExpiryInput.addEventListener('input', function(e) {
        let value = e.target.value.replace(/\D/g, '');
        
        if (value.length >= 2) {
          e.target.value = value.substring(0, 2) + '/' + value.substring(2, 4);
        } else {
          e.target.value = value;
        }
        
        validateCardExpiry(e.target.value);
      });
      
      cardCVCInput.addEventListener('input', function(e) {
        validateCardCVC(e.target.value);
      });
      
      cardEmailInput.addEventListener('input', function(e) {
        validateCardEmail(e.target.value);
      });
      
      // Procesar pago con tarjeta
      submitPayment.addEventListener('click', async function() {
        if (!validateCardForm()) {
          showMessage('Por favor corrige los errores en el formulario', 'error');
          return;
        }
        
        submitPayment.disabled = true;
        document.getElementById('paymentSpinner').style.display = 'block';
        
        try {
          await processCardPayment();
        } catch (error) {
          submitPayment.disabled = false;
          document.getElementById('paymentSpinner').style.display = 'none';
          showMessage('Error al procesar el pago: ' + error.message, 'error');
        }
      });
    }
    
    // ============================
    // FUNCIONES DE VALIDACIÓN
    // ============================
    
    function detectCardType(cardNumber) {
      document.querySelectorAll('.card-brand').forEach(icon => {
        icon.classList.remove('active');
      });
      
      if (/^4/.test(cardNumber)) {
        document.getElementById('visaIcon').classList.add('active');
        return 'visa';
      } else if (/^5[1-5]/.test(cardNumber)) {
        document.getElementById('mastercardIcon').classList.add('active');
        return 'mastercard';
      } else if (/^3[47]/.test(cardNumber)) {
        document.getElementById('amexIcon').classList.add('active');
        return 'amex';
      }
      
      return 'unknown';
    }
    
    function validateCardNumber(cardNumber) {
      const cleaned = cardNumber.replace(/\s/g, '');
      const errorElement = document.getElementById('cardNumberError');
      
      if (cleaned.length === 0) {
        showError('cardNumber', 'Este campo es obligatorio');
        return false;
      }
      
      if (cleaned.length < 13 || cleaned.length > 19) {
        showError('cardNumber', 'Número de tarjeta inválido');
        return false;
      }
      
      if (!luhnCheck(cleaned)) {
        showError('cardNumber', 'Número de tarjeta inválido');
        return false;
      }
      
      clearError('cardNumber');
      return true;
    }
    
    function luhnCheck(cardNumber) {
      let sum = 0;
      let isEven = false;
      
      for (let i = cardNumber.length - 1; i >= 0; i--) {
        let digit = parseInt(cardNumber.charAt(i), 10);
        
        if (isEven) {
          digit *= 2;
          if (digit > 9) {
            digit -= 9;
          }
        }
        
        sum += digit;
        isEven = !isEven;
      }
      
      return (sum % 10) === 0;
    }
    
    function validateCardName(name) {
      if (!name.trim()) {
        showError('cardName', 'Este campo es obligatorio');
        return false;
      }
      
      if (name.trim().length < 3) {
        showError('cardName', 'Nombre demasiado corto');
        return false;
      }
      
      clearError('cardName');
      return true;
    }
    
    function validateCardExpiry(expiry) {
      if (!expiry) {
        showError('cardExpiry', 'Este campo es obligatorio');
        return false;
      }
      
      const parts = expiry.split('/');
      if (parts.length !== 2 || parts[0].length !== 2 || parts[1].length !== 2) {
        showError('cardExpiry', 'Formato inválido (MM/AA)');
        return false;
      }
      
      const month = parseInt(parts[0], 10);
      const year = parseInt('20' + parts[1], 10);
      
      if (month < 1 || month > 12) {
        showError('cardExpiry', 'Mes inválido');
        return false;
      }
      
      const currentDate = new Date();
      const currentYear = currentDate.getFullYear();
      const currentMonth = currentDate.getMonth() + 1;
      
      if (year < currentYear || (year === currentYear && month < currentMonth)) {
        showError('cardExpiry', 'La tarjeta ha expirado');
        return false;
      }
      
      clearError('cardExpiry');
      return true;
    }
    
    function validateCardCVC(cvc) {
      const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
      const cardType = detectCardType(cardNumber);
      
      if (!cvc) {
        showError('cardCVC', 'Este campo es obligatorio');
        return false;
      }
      
      if (!/^\d+$/.test(cvc)) {
        showError('cardCVC', 'Solo se permiten números');
        return false;
      }
      
      let requiredLength = 3;
      if (cardType === 'amex') {
        requiredLength = 4;
      }
      
      if (cvc.length !== requiredLength) {
        showError('cardCVC', `El CVC debe tener ${requiredLength} dígitos`);
        return false;
      }
      
      clearError('cardCVC');
      return true;
    }
    
    function validateCardEmail(email) {
      if (!email) {
        showError('cardEmail', 'Este campo es obligatorio');
        return false;
      }
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        showError('cardEmail', 'Correo electrónico inválido');
        return false;
      }
      
      clearError('cardEmail');
      return true;
    }
    
    function validateCardForm() {
      const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
      const cardName = document.getElementById('cardName').value.trim();
      const cardExpiry = document.getElementById('cardExpiry').value.trim();
      const cardCVC = document.getElementById('cardCVC').value.trim();
      const cardEmail = document.getElementById('cardEmail').value.trim();
      
      const validations = [
        validateCardNumber(cardNumber),
        validateCardName(cardName),
        validateCardExpiry(cardExpiry),
        validateCardCVC(cardCVC),
        validateCardEmail(cardEmail)
      ];
      
      return validations.every(v => v === true);
    }
    
    function showError(field, message) {
      const input = document.getElementById(field);
      const errorElement = document.getElementById(field + 'Error');
      
      if (input) {
        input.classList.add('error');
      }
      
      if (errorElement) {
        errorElement.textContent = message;
      }
    }
    
    function clearError(field) {
      const input = document.getElementById(field);
      const errorElement = document.getElementById(field + 'Error');
      
      if (input) {
        input.classList.remove('error');
      }
      
      if (errorElement) {
        errorElement.textContent = '';
      }
    }
    
    function resetCardForm() {
      document.getElementById('cardNumber').value = '';
      document.getElementById('cardName').value = '';
      document.getElementById('cardExpiry').value = '';
      document.getElementById('cardCVC').value = '';
      document.getElementById('cardEmail').value = '';
      
      document.querySelectorAll('.card-brand').forEach(icon => {
        icon.classList.remove('active');
      });
      
      clearCardErrors();
    }
    
    function clearCardErrors() {
      ['cardNumber', 'cardName', 'cardExpiry', 'cardCVC', 'cardEmail'].forEach(field => {
        clearError(field);
      });
    }
    
    // ============================
    // PROCESAMIENTO DE PAGOS
    // ============================
    
    async function processCardPayment() {
      const cardNumber = document.getElementById('cardNumber').value.replace(/\s/g, '');
      const cardName = document.getElementById('cardName').value.trim();
      const saveCard = document.getElementById('saveCard').checked;
      
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          try {
            const isSuccess = Math.random() > 0.2;
            
            if (isSuccess) {
              const orderNumber = 'ORD' + Date.now().toString().slice(-8);
              
              if (saveCard) {
                const savedCards = JSON.parse(localStorage.getItem('savedCards') || '[]');
                savedCards.push({
                  last4: cardNumber.slice(-4),
                  type: detectCardType(cardNumber),
                  name: cardName
                });
                localStorage.setItem('savedCards', JSON.stringify(savedCards));
              }
              
              document.getElementById('cardOverlay').style.display = 'none';
              document.body.style.overflow = 'auto';
              
              showMessage(`¡Pago aprobado! Orden #${orderNumber} confirmada. Recibirás un correo de confirmación.`, 'success');
              
              setTimeout(() => {
                cart = [];
                localStorage.removeItem('cart');
                localStorage.removeItem('appliedCoupon');
                loadCart();
              }, 2000);
              
              resolve();
            } else {
              reject(new Error('El banco rechazó la transacción. Por favor intenta con otra tarjeta.'));
            }
          } catch (error) {
            reject(error);
          } finally {
            document.getElementById('submitPayment').disabled = false;
            document.getElementById('paymentSpinner').style.display = 'none';
          }
        }, 2000);
      });
    }
    
    function processPayPalPayment() {
      showMessage('Redirigiendo a PayPal...', 'info');
      
      setTimeout(() => {
        document.body.style.overflow = 'auto';
        
        const orderNumber = 'PP' + Date.now().toString().slice(-8);
        showMessage(`¡Pago con PayPal exitoso! Orden #${orderNumber} confirmada.`, 'success');
        
        cart = [];
        localStorage.removeItem('cart');
        localStorage.removeItem('appliedCoupon');
        loadCart();
      }, 1500);
    }
    
    function processCashPayment() {
      document.body.style.overflow = 'auto';
      
      const orderNumber = 'CASH' + Date.now().toString().slice(-8);
      showMessage(`¡Pedido #${orderNumber} confirmado! Paga C$ ${paymentAmount.toFixed(2)} al recibir tu pedido.`, 'success');
      
      cart = [];
      localStorage.removeItem('cart');
      localStorage.removeItem('appliedCoupon');
      loadCart();
    }
    
    // ============================
    // FUNCIONES EXISTENTES
    // ============================
    
    function setupEventListeners() {
      document.getElementById('clearCart').addEventListener('click', function() {
        if (cart.length === 0) {
          showMessage('El carrito ya está vacío', 'info');
          return;
        }
        
        if (confirm('¿Estás seguro de vaciar el carrito?')) {
          cart = [];
          localStorage.removeItem('cart');
          localStorage.removeItem('appliedCoupon');
          selectedItems.clear();
          loadCart();
          showMessage('Carrito vaciado correctamente', 'success');
        }
      });
      
      document.getElementById('selectAll').addEventListener('change', function(e) {
        const checkboxes = document.querySelectorAll('.item-checkbox');
        
        if (e.target.checked) {
          selectedItems.clear();
          cart.forEach((_, index) => selectedItems.add(index));
          checkboxes.forEach(cb => cb.checked = true);
          document.querySelectorAll('.cart-item').forEach(item => item.classList.add('selected'));
        } else {
          selectedItems.clear();
          checkboxes.forEach(cb => cb.checked = false);
          document.querySelectorAll('.cart-item').forEach(item => item.classList.remove('selected'));
        }
      });
      
      document.getElementById('deleteSelected').addEventListener('click', function() {
        if (selectedItems.size === 0) {
          showMessage('No hay productos seleccionados', 'info');
          return;
        }
        
        if (confirm(`¿Eliminar ${selectedItems.size} producto(s) seleccionado(s)?`)) {
          const sortedIndices = Array.from(selectedItems).sort((a, b) => b - a);
          
          sortedIndices.forEach(index => {
            cart.splice(index, 1);
          });
          
          selectedItems.clear();
          localStorage.setItem('cart', JSON.stringify(cart));
          loadCart();
          showMessage('Productos eliminados correctamente', 'success');
        }
      });
      
      document.getElementById('applyDiscount').addEventListener('click', function() {
        const couponInput = document.getElementById('couponCode');
        const couponCode = couponInput.value.trim().toUpperCase();
        
        if (!couponCode) {
          showMessage('Ingresa un código de cupón', 'warning');
          return;
        }
        
        if (couponCode === DISCOUNT_COUPON.code) {
          localStorage.setItem('appliedCoupon', couponCode);
          updateSummary();
          showMessage(`¡Cupón aplicado! ${DISCOUNT_COUPON.discount}% de descuento`, 'success');
          couponInput.value = '';
        } else {
          showMessage('Código de cupón inválido', 'error');
        }
      });
      
      document.getElementById('cartItems').addEventListener('click', function(e) {
        const target = e.target;
        const index = target.closest('[data-index]')?.dataset.index;
        
        if (!index) return;
        
        if (target.closest('.delete-btn')) {
          e.preventDefault();
          if (confirm('¿Eliminar este producto del carrito?')) {
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCart();
            showMessage('Producto eliminado', 'success');
          }
        }
        
        if (target.classList.contains('plus')) {
          cart[index].quantity++;
          localStorage.setItem('cart', JSON.stringify(cart));
          loadCart();
        }
        
        if (target.classList.contains('minus')) {
          if (cart[index].quantity > 1) {
            cart[index].quantity--;
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCart();
          }
        }
        
        if (target.classList.contains('item-checkbox')) {
          if (target.checked) {
            selectedItems.add(parseInt(index));
            target.closest('.cart-item').classList.add('selected');
          } else {
            selectedItems.delete(parseInt(index));
            target.closest('.cart-item').classList.remove('selected');
            document.getElementById('selectAll').checked = false;
          }
        }
      });
      
      document.getElementById('cartItems').addEventListener('change', function(e) {
        if (e.target.classList.contains('qty-input')) {
          const index = e.target.dataset.index;
          const newQty = parseInt(e.target.value);
          
          if (newQty >= 1 && newQty <= 99) {
            cart[index].quantity = newQty;
            localStorage.setItem('cart', JSON.stringify(cart));
            loadCart();
          } else {
            e.target.value = cart[index].quantity;
          }
        }
      });
    }
    
    function showMessage(text, type = 'success') {
      const messageDiv = document.getElementById('successMessage');
      messageDiv.textContent = text;
      
      const colors = {
        success: '#4CAF50',
        error: '#f44336',
        warning: '#ff9800',
        info: '#2196F3'
      };
      
      messageDiv.style.backgroundColor = colors[type] || colors.success;
      messageDiv.style.display = 'block';
      
      setTimeout(() => {
        messageDiv.style.display = 'none';
      }, 4000);
    }
    
    function addToCart(product) {
      const existingIndex = cart.findIndex(item => 
        item.id === product.id && 
        item.size === product.size && 
        item.color === product.color
      );
      
      if (existingIndex !== -1) {
        cart[existingIndex].quantity += product.quantity || 1;
      } else {
        cart.push({
          id: product.id,
          name: product.name,
          price: parseFloat(product.price) || 0,
          quantity: parseInt(product.quantity) || 1,
          image: product.image,
          size: product.size,
          color: product.color,
          description: product.description
        });
      }
      
      localStorage.setItem('cart', JSON.stringify(cart));
      updateCartCounter();
      showMessage(`"${product.name}" agregado al carrito`, 'success');
    }
    
    // Función para probar con productos de ejemplo (puedes eliminarla después)
    function addSampleProducts() {
      const sampleProducts = [
        {
          id: 1,
          name: "Camisa Elegante",
          price: 450.00,
          quantity: 2,
          image: "https://via.placeholder.com/80",
          size: "M",
          color: "Azul",
          description: "Camisa de algodón 100%"
        },
        {
          id: 2,
          name: "Pantalón Casual",
          price: 680.00,
          quantity: 1,
          image: "https://via.placeholder.com/80",
          size: "32",
          color: "Negro",
          description: "Pantalón de mezclilla"
        },
        {
          id: 3,
          name: "Vestido de Noche",
          price: 1200.00,
          quantity: 1,
          image: "https://via.placeholder.com/80",
          size: "S",
          color: "Rojo",
          description: "Vestido elegante para ocasiones especiales"
        }
      ];
      
      sampleProducts.forEach(product => addToCart(product));
    }
    
    // Descomenta la siguiente línea para probar con productos de ejemplo:
    // addSampleProducts();
    
    window.addEventListener('storage', function(e) {
      if (e.key === 'cart') {
        cart = JSON.parse(e.newValue) || [];
        loadCart();
      }
    });
    
    window.addToCart = addToCart;
    window.updateCartCounter = updateCartCounter;
    window.getCartCount = function() {
      return cart.reduce((sum, item) => sum + (parseInt(item.quantity) || 1), 0);
    };
  </script>
</body>
</html>